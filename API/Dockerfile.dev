# Development Dockerfile for .NET API
FROM mcr.microsoft.com/dotnet/sdk:9.0 AS development

WORKDIR /src

# Copy project file and restore dependencies
COPY ["API/API.csproj", "API/"]
WORKDIR /src/API
RUN dotnet restore "API.csproj"

# Copy source code
COPY API/ .

# Expose port
EXPOSE 8080

# Set environment for development
ENV ASPNETCORE_ENVIRONMENT=Development
ENV ASPNETCORE_URLS=http://+:8080
ENV DOTNET_USE_POLLING_FILE_WATCHER=true

# Start with dotnet watch for hot reload
ENTRYPOINT ["dotnet", "watch", "run", "--urls", "http://+:8080"]
